<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CS 3520: doxygen/src/lodepng.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CS 3520
   </div>
   <div id="projectbrief">CS 3520</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4e8d938e9ddb5a617c200d5739d1f41a.html">doxygen</a></li><li class="navelem"><a class="el" href="dir_24f3ee575decadb4b98224df346b9d32.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">lodepng.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">LodePNG version 20080927</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">Copyright (c) 2005-2008 Lode Vandevenne</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">This software is provided &#39;as-is&#39;, without any express or implied</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">warranty. In no event will the authors be held liable for any damages</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">arising from the use of this software.</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">Permission is granted to anyone to use this software for any purpose,</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">including commercial applications, and to alter it and redistribute it</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">freely, subject to the following restrictions:</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">    1. The origin of this software must not be misrepresented; you must not</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">    claim that you wrote the original software. If you use this software</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">    in a product, an acknowledgment in the product documentation would be</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">    appreciated but is not required.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">    2. Altered source versions must be plainly marked as such, and must not be</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">    misrepresented as being the original software.</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">    3. This notice may not be removed or altered from any source</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">    distribution.</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#ifndef LODEPNG_H</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#define LODEPNG_H</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/* Code Sections                                                              */</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">/*The following defines can be commented disable code sections. Gives potential faster compile and smaller binary.*/</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#define LODEPNG_COMPILE_ZLIB             </span><span class="comment">/*deflate&amp;zlib encoder and deflate&amp;zlib decoder*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#define LODEPNG_COMPILE_PNG              </span><span class="comment">/*png encoder and png decoder*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">//#define LODEPNG_COMPILE_DECODER          /*deflate&amp;zlib decoder and png decoder*/</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#define LODEPNG_COMPILE_ENCODER          </span><span class="comment">/*deflate&amp;zlib encoder and png encoder*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#define LODEPNG_COMPILE_DISK             </span><span class="comment">/*the optional built in harddisk file loading and saving functions*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">//#define LODEPNG_COMPILE_ANCILLARY_CHUNKS /*any code or struct datamember related to chunks other than IHDR, IDAT, PLTE, tRNS, IEND*/</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">//#define LODEPNG_COMPILE_UNKNOWN_CHUNKS   /*handling of unknown chunks*/</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">/* LodeFlate &amp; LodeZlib Setting structs                                       */</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_DECODER</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>LodeZlib_DecompressSettings</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;{</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordtype">unsigned</span> ignoreAdler32;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;} LodeZlib_DecompressSettings;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> LodeZlib_DecompressSettings LodeZlib_defaultDecompressSettings;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keywordtype">void</span> LodeZlib_DecompressSettings_init(LodeZlib_DecompressSettings* settings);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_DECODER*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_ENCODER</span></div><div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="structLodeZlib__DeflateSettings.html">   62</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structLodeZlib__DeflateSettings.html">LodeZlib_DeflateSettings</a> <span class="comment">/*deflate = compress*/</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;{</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">/*LZ77 related settings*/</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordtype">unsigned</span> btype; <span class="comment">/*the block type for LZ*/</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordtype">unsigned</span> useLZ77; <span class="comment">/*whether or not to use LZ77*/</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordtype">unsigned</span> windowSize; <span class="comment">/*the maximum is 32768*/</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;} <a class="code" href="structLodeZlib__DeflateSettings.html">LodeZlib_DeflateSettings</a>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <a class="code" href="structLodeZlib__DeflateSettings.html">LodeZlib_DeflateSettings</a> LodeZlib_defaultDeflateSettings;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keywordtype">void</span> LodeZlib_DeflateSettings_init(<a class="code" href="structLodeZlib__DeflateSettings.html">LodeZlib_DeflateSettings</a>* settings);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_ENCODER*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_ZLIB</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">/* LodeFlate &amp; LodeZlib                                                       */</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_DECODER</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">/*This function reallocates the out buffer and appends the data.</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">Either, *out must be NULL and *outsize must be 0, or, *out must be a valid buffer and *outsize its size in bytes.*/</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keywordtype">unsigned</span> LodeZlib_decompress(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** out, <span class="keywordtype">size_t</span>* outsize, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <span class="keywordtype">size_t</span> insize, <span class="keyword">const</span> LodeZlib_DecompressSettings* settings);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_DECODER*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_ENCODER</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">/*This function reallocates the out buffer and appends the data.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">Either, *out must be NULL and *outsize must be 0, or, *out must be a valid buffer and *outsize its size in bytes.*/</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="keywordtype">unsigned</span> LodeZlib_compress(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** out, <span class="keywordtype">size_t</span>* outsize, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <span class="keywordtype">size_t</span> insize, <span class="keyword">const</span> <a class="code" href="structLodeZlib__DeflateSettings.html">LodeZlib_DeflateSettings</a>* settings);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_ENCODER*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_ZLIB*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_PNG</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">/* LodePNG                                                                    */</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">/*LodePNG_chunk functions: These functions need as input a large enough amount of allocated memory.*/</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_chunk_length(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk); <span class="comment">/*get the length of the data of the chunk. Total chunk length has 12 bytes more.*/</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="keywordtype">void</span> LodePNG_chunk_type(<span class="keywordtype">char</span> type[5], <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk); <span class="comment">/*puts the 4-byte type in null terminated string*/</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> LodePNG_chunk_type_equals(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk, <span class="keyword">const</span> <span class="keywordtype">char</span>* type); <span class="comment">/*check if the type is the given type*/</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">/*properties of PNG chunks gotten from capitalization of chunk type name, as defined by the standard*/</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> LodePNG_chunk_critical(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk); <span class="comment">/*0: ancillary chunk, 1: it&#39;s one of the critical chunk types*/</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> LodePNG_chunk_private(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk); <span class="comment">/*0: public, 1: private*/</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> LodePNG_chunk_safetocopy(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk); <span class="comment">/*0: the chunk is unsafe to copy, 1: the chunk is safe to copy*/</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* LodePNG_chunk_data(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk); <span class="comment">/*get pointer to the data of the chunk*/</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* LodePNG_chunk_data_const(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk); <span class="comment">/*get pointer to the data of the chunk*/</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_chunk_check_crc(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk); <span class="comment">/*returns 0 if the crc is correct, 1 if it&#39;s incorrect*/</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keywordtype">void</span> LodePNG_chunk_generate_crc(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk); <span class="comment">/*generates the correct CRC from the data and puts it in the last 4 bytes of the chunk*/</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">/*iterate to next chunks.*/</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* LodePNG_chunk_next(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* LodePNG_chunk_next_const(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/*add chunks to out buffer. It reallocs the buffer to append the data. returns error code*/</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_append_chunk(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** out, <span class="keywordtype">size_t</span>* outlength, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk); <span class="comment">/*appends chunk that was already created, to the data. Returns pointer to start of appended chunk, or NULL if error happened*/</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_create_chunk(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** out, <span class="keywordtype">size_t</span>* outlength, <span class="keywordtype">unsigned</span> length, <span class="keyword">const</span> <span class="keywordtype">char</span>* type, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* data); <span class="comment">/*appends new chunk to out. Returns pointer to start of appended chunk, or NULL if error happened; may change memory address of out buffer*/</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="structLodePNG__InfoColor.html">  124</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a> <span class="comment">/*info about the color type of an image*/</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;{</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">/*header (IHDR)*/</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordtype">unsigned</span> colorType; <span class="comment">/*color type*/</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordtype">unsigned</span> bitDepth;  <span class="comment">/*bits per sample*/</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">/*palette (PLTE)*/</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* palette; <span class="comment">/*palette in RGBARGBA... order*/</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordtype">size_t</span> palettesize; <span class="comment">/*palette size in number of colors (amount of bytes is 4 * palettesize)*/</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  </div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="comment">/*transparent color key (tRNS)*/</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordtype">unsigned</span> key_defined; <span class="comment">/*is a transparent color key given?*/</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordtype">unsigned</span> key_r;       <span class="comment">/*red component of color key*/</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordtype">unsigned</span> key_g;       <span class="comment">/*green component of color key*/</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordtype">unsigned</span> key_b;       <span class="comment">/*blue component of color key*/</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;} <a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="keywordtype">void</span> LodePNG_InfoColor_init(<a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a>* info);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="keywordtype">void</span> LodePNG_InfoColor_cleanup(<a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a>* info);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_InfoColor_copy(<a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a>* dest, <span class="keyword">const</span> <a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a>* source);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">/*Use these functions instead of allocating palette manually*/</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="keywordtype">void</span> LodePNG_InfoColor_clearPalette(<a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a>* info);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_InfoColor_addPalette(<a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a>* info, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> r, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> g, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> b, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> a); <span class="comment">/*add 1 color to the palette*/</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">/*additional color info*/</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_InfoColor_getBpp(<span class="keyword">const</span> <a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a>* info);      <span class="comment">/*bits per pixel*/</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_InfoColor_getChannels(<span class="keyword">const</span> <a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a>* info); <span class="comment">/*amount of channels*/</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_InfoColor_isGreyscaleType(<span class="keyword">const</span> <a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a>* info); <span class="comment">/*is it a greyscale type? (colorType 0 or 4)*/</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_InfoColor_isAlphaType(<span class="keyword">const</span> <a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a>* info);     <span class="comment">/*has it an alpha channel? (colorType 2 or 6)*/</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_ANCILLARY_CHUNKS</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>LodePNG_Time <span class="comment">/*LodePNG&#39;s encoder does not generate the current time. To make it add a time chunk the correct time has to be provided*/</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;{</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordtype">unsigned</span>      year;    <span class="comment">/*2 bytes*/</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> month;   <span class="comment">/*1-12*/</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> day;     <span class="comment">/*1-31*/</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> hour;    <span class="comment">/*0-23*/</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> minute;  <span class="comment">/*0-59*/</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> second;  <span class="comment">/*0-60 (to allow for leap seconds)*/</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;} LodePNG_Time;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>LodePNG_Text <span class="comment">/*non-international text*/</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordtype">size_t</span> num;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordtype">char</span>** keys; <span class="comment">/*the keyword of a text chunk (e.g. &quot;Comment&quot;)*/</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordtype">char</span>** strings; <span class="comment">/*the actual text*/</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;} LodePNG_Text;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="keywordtype">void</span> LodePNG_Text_init(LodePNG_Text* text);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="keywordtype">void</span> LodePNG_Text_cleanup(LodePNG_Text* text);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_Text_copy(LodePNG_Text* dest, <span class="keyword">const</span> LodePNG_Text* source);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">/*Use these functions instead of allocating the char**s manually*/</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="keywordtype">void</span> LodePNG_Text_clear(LodePNG_Text* text);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_Text_add(LodePNG_Text* text, <span class="keyword">const</span> <span class="keywordtype">char</span>* key, <span class="keyword">const</span> <span class="keywordtype">char</span>* str); <span class="comment">/*push back both texts at once*/</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>LodePNG_IText <span class="comment">/*international text*/</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;{</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordtype">size_t</span> num;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordtype">char</span>** keys; <span class="comment">/*the English keyword of the text chunk (e.g. &quot;Comment&quot;)*/</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordtype">char</span>** langtags; <span class="comment">/*the language tag for this text&#39;s international language, ISO/IEC 646 string, e.g. ISO 639 language tag*/</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="keywordtype">char</span>** transkeys; <span class="comment">/*keyword translated to the international language - UTF-8 string*/</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordtype">char</span>** strings; <span class="comment">/*the actual international text - UTF-8 string*/</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;} LodePNG_IText;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="keywordtype">void</span> LodePNG_IText_init(LodePNG_IText* text);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="keywordtype">void</span> LodePNG_IText_cleanup(LodePNG_IText* text);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_IText_copy(LodePNG_IText* dest, <span class="keyword">const</span> LodePNG_IText* source);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">/*Use these functions instead of allocating the char**s manually*/</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="keywordtype">void</span> LodePNG_IText_clear(LodePNG_IText* text);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_IText_add(LodePNG_IText* text, <span class="keyword">const</span> <span class="keywordtype">char</span>* key, <span class="keyword">const</span> <span class="keywordtype">char</span>* langtag, <span class="keyword">const</span> <span class="keywordtype">char</span>* transkey, <span class="keyword">const</span> <span class="keywordtype">char</span>* str); <span class="comment">/*push back the 4 texts of 1 chunk at once*/</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_ANCILLARY_CHUNKS*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_UNKNOWN_CHUNKS</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>LodePNG_UnknownChunks <span class="comment">/*unknown chunks read from the PNG, or extra chunks the user wants to have added in the encoded PNG*/</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;{</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="comment">/*There are 3 buffers, one for each position in the PNG where unknown chunks can appear</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">    each buffer contains all unknown chunks for that position consecutively</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">    The 3 buffers are the unknown chunks between certain critical chunks:</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">    0: IHDR-PLTE, 1: PLTE-IDAT, 2: IDAT-IEND*/</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* data[3];</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordtype">size_t</span> datasize[3]; <span class="comment">/*size in bytes of the unknown chunks, given for protection*/</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;} LodePNG_UnknownChunks;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="keywordtype">void</span> LodePNG_UnknownChunks_init(LodePNG_UnknownChunks* chunks);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="keywordtype">void</span> LodePNG_UnknownChunks_cleanup(LodePNG_UnknownChunks* chunks);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_UnknownChunks_copy(LodePNG_UnknownChunks* dest, <span class="keyword">const</span> LodePNG_UnknownChunks* src);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_UNKNOWN_CHUNKS*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="structLodePNG__InfoPng.html">  217</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structLodePNG__InfoPng.html">LodePNG_InfoPng</a> <span class="comment">/*information about the PNG image, except pixels and sometimes except width and height*/</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">/*header (IHDR), palette (PLTE) and transparency (tRNS)*/</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordtype">unsigned</span> width;             <span class="comment">/*width of the image in pixels (ignored by encoder, but filled in by decoder)*/</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordtype">unsigned</span> height;            <span class="comment">/*height of the image in pixels (ignored by encoder, but filled in by decoder)*/</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordtype">unsigned</span> compressionMethod; <span class="comment">/*compression method of the original file*/</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordtype">unsigned</span> filterMethod;      <span class="comment">/*filter method of the original file*/</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordtype">unsigned</span> interlaceMethod;   <span class="comment">/*interlace method of the original file*/</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a> color;    <span class="comment">/*color type and bits, palette, transparency*/</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  </div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_ANCILLARY_CHUNKS</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  </div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="comment">/*suggested background color (bKGD)*/</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordtype">unsigned</span> background_defined; <span class="comment">/*is a suggested background color given?*/</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordtype">unsigned</span> background_r;       <span class="comment">/*red component of suggested background color*/</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordtype">unsigned</span> background_g;       <span class="comment">/*green component of suggested background color*/</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordtype">unsigned</span> background_b;       <span class="comment">/*blue component of suggested background color*/</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  </div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">/*non-international text chunks (tEXt and zTXt)*/</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  LodePNG_Text text;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  </div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">/*international text chunks (iTXt)*/</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  LodePNG_IText itext;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  </div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="comment">/*time chunk (tIME)*/</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> time_defined; <span class="comment">/*if 0, no tIME chunk was or will be generated in the PNG image*/</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  LodePNG_Time time;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  </div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="comment">/*phys chunk (pHYs)*/</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordtype">unsigned</span>      phys_defined; <span class="comment">/*is pHYs chunk defined?*/</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordtype">unsigned</span>      phys_x;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordtype">unsigned</span>      phys_y;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> phys_unit; <span class="comment">/*may be 0 (unknown unit) or 1 (metre)*/</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  </div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_ANCILLARY_CHUNKS*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_UNKNOWN_CHUNKS</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">/*unknown chunks*/</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  LodePNG_UnknownChunks unknown_chunks;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_UNKNOWN_CHUNKS*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  </div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;} <a class="code" href="structLodePNG__InfoPng.html">LodePNG_InfoPng</a>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="keywordtype">void</span> LodePNG_InfoPng_init(<a class="code" href="structLodePNG__InfoPng.html">LodePNG_InfoPng</a>* info);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="keywordtype">void</span> LodePNG_InfoPng_cleanup(<a class="code" href="structLodePNG__InfoPng.html">LodePNG_InfoPng</a>* info);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_InfoPng_copy(<a class="code" href="structLodePNG__InfoPng.html">LodePNG_InfoPng</a>* dest, <span class="keyword">const</span> <a class="code" href="structLodePNG__InfoPng.html">LodePNG_InfoPng</a>* source);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="structLodePNG__InfoRaw.html">  264</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structLodePNG__InfoRaw.html">LodePNG_InfoRaw</a> <span class="comment">/*contains user-chosen information about the raw image data, which is independent of the PNG image*/</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;{</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a> color;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;} <a class="code" href="structLodePNG__InfoRaw.html">LodePNG_InfoRaw</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="keywordtype">void</span> LodePNG_InfoRaw_init(<a class="code" href="structLodePNG__InfoRaw.html">LodePNG_InfoRaw</a>* info);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="keywordtype">void</span> LodePNG_InfoRaw_cleanup(<a class="code" href="structLodePNG__InfoRaw.html">LodePNG_InfoRaw</a>* info);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_InfoRaw_copy(<a class="code" href="structLodePNG__InfoRaw.html">LodePNG_InfoRaw</a>* dest, <span class="keyword">const</span> <a class="code" href="structLodePNG__InfoRaw.html">LodePNG_InfoRaw</a>* source);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">LodePNG_convert: Converts from any color type to 24-bit or 32-bit (later maybe more supported). return value = LodePNG error code</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">The out buffer must have (w * h * bpp + 7) / 8, where bpp is the bits per pixel of the output color type (LodePNG_InfoColor_getBpp)</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_convert(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* out, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a>* infoOut, <a class="code" href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a>* infoIn, <span class="keywordtype">unsigned</span> w, <span class="keywordtype">unsigned</span> h);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_DECODER</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>LodePNG_DecodeSettings</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  LodeZlib_DecompressSettings zlibsettings; <span class="comment">/*in here is the setting to ignore Adler32 checksums*/</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  </div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordtype">unsigned</span> ignoreCrc; <span class="comment">/*ignore CRC checksums*/</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordtype">unsigned</span> color_convert; <span class="comment">/*whether to convert the PNG to the color type you want. Default: yes*/</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  </div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_ANCILLARY_CHUNKS</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordtype">unsigned</span> readTextChunks; <span class="comment">/*if false but rememberUnknownChunks is true, they&#39;re stored in the unknown chunks*/</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_ANCILLARY_CHUNKS*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_UNKNOWN_CHUNKS</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keywordtype">unsigned</span> rememberUnknownChunks; <span class="comment">/*store all bytes from unknown chunks in the InfoPng (off by default, useful for a png editor)*/</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_UNKNOWN_CHUNKS*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;} LodePNG_DecodeSettings;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="keywordtype">void</span> LodePNG_DecodeSettings_init(LodePNG_DecodeSettings* settings);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>LodePNG_Decoder</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;{</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  LodePNG_DecodeSettings settings;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <a class="code" href="structLodePNG__InfoRaw.html">LodePNG_InfoRaw</a> infoRaw;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <a class="code" href="structLodePNG__InfoPng.html">LodePNG_InfoPng</a> infoPng; <span class="comment">/*info of the PNG image obtained after decoding*/</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordtype">unsigned</span> error;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;} LodePNG_Decoder;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="keywordtype">void</span> LodePNG_Decoder_init(LodePNG_Decoder* decoder);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="keywordtype">void</span> LodePNG_Decoder_cleanup(LodePNG_Decoder* decoder);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="keywordtype">void</span> LodePNG_Decoder_copy(LodePNG_Decoder* dest, <span class="keyword">const</span> LodePNG_Decoder* source);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">/*decoding functions*/</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">/*This function allocates the out buffer and stores the size in *outsize.*/</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="keywordtype">void</span> LodePNG_decode(LodePNG_Decoder* decoder, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** out, <span class="keywordtype">size_t</span>* outsize, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <span class="keywordtype">size_t</span> insize);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_decode32(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** out, <span class="keywordtype">unsigned</span>* w, <span class="keywordtype">unsigned</span>* h, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <span class="keywordtype">size_t</span> insize); <span class="comment">/*return value is error*/</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_DISK</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_decode32f(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** out, <span class="keywordtype">unsigned</span>* w, <span class="keywordtype">unsigned</span>* h, <span class="keyword">const</span> <span class="keywordtype">char</span>* filename);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_DISK*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="keywordtype">void</span> LodePNG_inspect(LodePNG_Decoder* decoder, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <span class="keywordtype">size_t</span> size); <span class="comment">/*read the png header*/</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_DECODER*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_ENCODER</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="structLodePNG__EncodeSettings.html">  324</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structLodePNG__EncodeSettings.html">LodePNG_EncodeSettings</a></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;{</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <a class="code" href="structLodeZlib__DeflateSettings.html">LodeZlib_DeflateSettings</a> zlibsettings; <span class="comment">/*settings for the zlib encoder, such as window size, ...*/</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  </div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordtype">unsigned</span> autoLeaveOutAlphaChannel; <span class="comment">/*automatically use color type without alpha instead of given one, if given image is opaque*/</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordtype">unsigned</span> force_palette; <span class="comment">/*force creating a PLTE chunk if colortype is 2 or 6 (= a suggested palette). If colortype is 3, PLTE is _always_ created.*/</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_ANCILLARY_CHUNKS</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordtype">unsigned</span> add_id; <span class="comment">/*add LodePNG version as text chunk*/</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordtype">unsigned</span> text_compression; <span class="comment">/*encode text chunks as zTXt chunks instead of tEXt chunks, and use compression in iTXt chunks*/</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_ANCILLARY_CHUNKS*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;} <a class="code" href="structLodePNG__EncodeSettings.html">LodePNG_EncodeSettings</a>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="keywordtype">void</span> LodePNG_EncodeSettings_init(<a class="code" href="structLodePNG__EncodeSettings.html">LodePNG_EncodeSettings</a>* settings);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="structLodePNG__Encoder.html">  338</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structLodePNG__Encoder.html">LodePNG_Encoder</a></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;{</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <a class="code" href="structLodePNG__EncodeSettings.html">LodePNG_EncodeSettings</a> settings;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <a class="code" href="structLodePNG__InfoPng.html">LodePNG_InfoPng</a> infoPng; <span class="comment">/*the info specified by the user may not be changed by the encoder. The encoder will try to generate a PNG close to the given info.*/</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="structLodePNG__InfoRaw.html">LodePNG_InfoRaw</a> infoRaw; <span class="comment">/*put the properties of the input raw image in here*/</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordtype">unsigned</span> error;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;} <a class="code" href="structLodePNG__Encoder.html">LodePNG_Encoder</a>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="keywordtype">void</span> LodePNG_Encoder_init(<a class="code" href="structLodePNG__Encoder.html">LodePNG_Encoder</a>* encoder);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="keywordtype">void</span> LodePNG_Encoder_cleanup(<a class="code" href="structLodePNG__Encoder.html">LodePNG_Encoder</a>* encoder);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="keywordtype">void</span> LodePNG_Encoder_copy(<a class="code" href="structLodePNG__Encoder.html">LodePNG_Encoder</a>* dest, <span class="keyword">const</span> <a class="code" href="structLodePNG__Encoder.html">LodePNG_Encoder</a>* source);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">/*This function allocates the out buffer and stores the size in *outsize.*/</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="keywordtype">void</span> LodePNG_encode(<a class="code" href="structLodePNG__Encoder.html">LodePNG_Encoder</a>* encoder, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** out, <span class="keywordtype">size_t</span>* outsize, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* image, <span class="keywordtype">unsigned</span> w, <span class="keywordtype">unsigned</span> h);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_encode32(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** out, <span class="keywordtype">size_t</span>* outsize, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* image, <span class="keywordtype">unsigned</span> w, <span class="keywordtype">unsigned</span> h); <span class="comment">/*return value is error*/</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_DISK</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_encode32f(<span class="keyword">const</span> <span class="keywordtype">char</span>* filename, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* image, <span class="keywordtype">unsigned</span> w, <span class="keywordtype">unsigned</span> h);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_DISK*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_ENCODER*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_PNG*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="preprocessor">#ifdef LODEPNG_COMPILE_DISK</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">/*free functions allowing to load and save a file from/to harddisk*/</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">/*This function allocates the out buffer and stores the size in *outsize.*/</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_loadFile(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** out, <span class="keywordtype">size_t</span>* outsize, <span class="keyword">const</span> <span class="keywordtype">char</span>* filename);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="keywordtype">unsigned</span> LodePNG_saveFile(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> buffersize, <span class="keyword">const</span> <span class="keywordtype">char</span>* filename);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*LODEPNG_COMPILE_DISK*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">TODO:</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">[ ] test if there are no memory leaks or security exploits - done a lot but needs to be checked often</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">[ ] LZ77 encoder more like the one described in zlib - to make sure it&#39;s patentfree</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">[ ] converting color to 16-bit types</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">[ ] read all public PNG chunk types (but never let the color profile and gamma ones ever touch RGB values, that is very annoying for textures as well as images in a browser)</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">[ ] make sure encoder generates no chunks with size &gt; (2^31)-1</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">[ ] partial decoding (stream processing)</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">[ ] let the &quot;isFullyOpaque&quot; function check color keys and transparent palettes too</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">[ ] better name for the variables &quot;codes&quot;, &quot;codesD&quot;, &quot;codelengthcodes&quot;, &quot;clcl&quot; and &quot;lldl&quot;</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">[ ] check compatibility with vareous compilers  - done but needs to be redone for every newer version</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">[ ] don&#39;t stop decoding on errors like 69, 57, 58 (make warnings that the decoder stores in the error at the very end? and make some errors just let it stop with this one chunk but still do the next ones)</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">[ ] make option to choose if the raw image with non multiple of 8 bits per scanline should have padding bits or not, if people like storing raw images that way</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">LodePNG Documentation</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">---------------------</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">0. table of contents</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">--------------------</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">  1. about</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">   1.1. supported features</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">   1.2. features not supported</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">  2. C and C++ version</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">  3. A note about security!</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">  4. simple functions</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">   4.1 C Simple Functions</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">   4.2 C++ Simple Functions</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">  5. decoder</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">  6. encoder</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">  7. color conversions</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">  8. info values</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">  9. error values</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">  10. file IO</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">  11. chunks and PNG editing</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">  12. compiler support</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">  13. examples</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">   13.1. decoder example</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">   13.2. encoder example</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">  14. LodeZlib</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">  15. changes</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">  16. contact information</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">1. about</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">--------</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">PNG is a file format to store raster images losslessly with good compression,</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">supporting different color types. It can be implemented in a patent-free way.</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">LodePNG is a PNG codec according to the Portable Network Graphics (PNG)</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">Specification (Second Edition) - W3C Recommendation 10 November 2003.</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">The specifications used are:</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">*) Portable Network Graphics (PNG) Specification (Second Edition):</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">     http://www.w3.org/TR/2003/REC-PNG-20031110</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">*) RFC 1950 ZLIB Compressed Data Format version 3.3:</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">     http://www.gzip.org/zlib/rfc-zlib.html</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">*) RFC 1951 DEFLATE Compressed Data Format Specification ver 1.3:</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">     http://www.gzip.org/zlib/rfc-deflate.html</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">The most recent version of LodePNG can currently be found at</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">http://members.gamedev.net/lode/projects/LodePNG/</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">LodePNG works both in C (ISO C90) and C++, with a C++ wrapper that adds</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">extra functionality.</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">LodePNG exists out of two files:</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">-lodepng.h: the header file for both C and C++</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">-lodepng.c(pp): give it the name lodepng.c or lodepng.cpp depending on your usage</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">If you want to start using LodePNG right away without reading this doc, get the</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">files lodepng_examples.c or lodepng_examples.cpp to see how to use it in code,</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">or check the (smaller) examples in chapter 13 here.</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">LodePNG is simple but only supports the basic requirements. To achieve</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">simplicity, the following design choices were made: There are no dependencies</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">on any external library. To decode PNGs, there&#39;s a Decoder struct or class that</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">can convert any PNG file data into an RGBA image buffer with a single function</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">call. To encode PNGs, there&#39;s an Encoder struct or class that can convert image</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">data into PNG file data with a single function call. To read and write files,</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">there are simple functions to convert the files to/from buffers in memory.</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">This all makes LodePNG suitable for loading textures in games, demoscene</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">productions, saving a screenshot, images in programs that require them for simple</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">usage, ... It&#39;s less suitable for full fledged image editors, loading PNGs</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">over network (it requires all the image data to be available before decoding can</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">begin), life-critical systems, ...</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">LodePNG has a standards conformant decoder and encoder, and supports the ability</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">to make a somewhat conformant editor.</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">1.1. supported features</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">-----------------------</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">The following features are supported by the decoder:</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">*) decoding of PNGs with any color type, bit depth and interlace mode, to a 24- or 32-bit color raw image, or the same color type as the PNG</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">*) encoding of PNGs, from any raw image to 24- or 32-bit color, or the same color type as the raw image</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">*) Adam7 interlace and deinterlace for any color type</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">*) loading the image from harddisk or decoding it from a buffer from other sources than harddisk</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">*) support for alpha channels, including RGBA color model, translucent palettes and color keying</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">*) zlib decompression (inflate)</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">*) zlib compression (deflate)</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">*) CRC32 and ADLER32 checksums</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">*) handling of unknown chunks, allowing making a PNG editor that stores custom and unknown chunks.</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">*) the following chunks are supported (generated/interpreted) by both encoder and decoder:</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">    IHDR: header information</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">    PLTE: color palette</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">    IDAT: pixel data</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">    IEND: the final chunk</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">    tRNS: transparency for palettized images</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">    tEXt: textual information</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">    zTXt: compressed textual information</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">    iTXt: international textual information</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">    bKGD: suggested background color</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">    pHYs: physical dimensions</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">    tIME: modification time</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">1.2. features not supported</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">---------------------------</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">The following features are _not_ supported:</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">*) some features needed to make a conformant PNG-Editor might be still missing.</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">*) partial loading/stream processing. All data must be available and is processed in one call.</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">*) The following public chunks are not supported but treated as unknown chunks by LodePNG</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">    cHRM, gAMA, iCCP, sRGB, sBIT, hIST, sPLT</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">2. C and C++ version</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">--------------------</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">The C version uses buffers allocated with alloc instead that you need to free()</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">yourself. On top of that, you need to use init and cleanup functions for each</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">struct whenever using a struct from the C version to avoid exploits and memory leaks.</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">The C++ version has constructors and destructors that take care of these things,</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">and uses std::vectors in the interface for storing data.</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">Both the C and the C++ version are contained in this file! The C++ code depends on</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">the C code, the C code works on its own.</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">These files work without modification for both C and C++ compilers because all the</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">additional C++ code is in &quot;#ifdef __cplusplus&quot; blocks that make C-compilers ignore</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">it, and the C code is made to compile both with strict ISO C90 and C++.</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">To use the C++ version, you need to rename the source file to lodepng.cpp (instead</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">of lodepng.c), and compile it with a C++ compiler.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">To use the C version, you need to rename the source file to lodepng.c (instead</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">of lodepng.cpp), and compile it with a C compiler.</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">3. A note about security!</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment">-------------------------</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">Despite being used already and having received bug fixes whenever bugs were reported,</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">LodePNG may still contain possible exploits.</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">If you discover a possible exploit, please let me know, and it will be eliminated.</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">When using LodePNG, care has to be taken with the C version of LodePNG, as well as the C-style</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">structs when working with C++. The following conventions are used for all C-style structs:</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">-if a struct has a corresponding init function, always call the init function when making a new one, to avoid exploits</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">-if a struct has a corresponding cleanup function, call it before the struct disappears to avoid memory leaks</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">-if a struct has a corresponding copy function, use the copy function instead of &quot;=&quot;. The destination must be inited already!</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">4. &quot;Simple&quot; Functions</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">---------------------</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">For the most simple usage cases of loading and saving a PNG image, there</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">are some simple functions that do everything in 1 call (instead of you</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">having to instantiate a struct or class).</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">The simple versions always use 32-bit RGBA color for the raw image, but</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">still support loading arbitrary-colortype PNG images.</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">The later sections of this manual are devoted to the complex versions, where</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">you can use other color types and conversions.</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">4.1 C Simple Functions</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">----------------------</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">The C simple functions have a &quot;32&quot; or &quot;32f&quot; in their name, and don&#39;t take a struct as</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">parameter, unlike the non-simple ones (see more down in the documentation).</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">unsigned LodePNG_decode32(unsigned char** out, unsigned* w, unsigned* h, const unsigned char* in, size_t insize);</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">Load PNG from given buffer.</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">As input, give an unsigned char* buffer gotten by loading the .png file and its size.</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">As output, you get a dynamically allocated buffer of large enough size, and the width and height of the image.</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">The buffer&#39;s size is w * h * 4. The image is in RGBA format.</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">The return value is the error (0 if ok).</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">You need to do free(out) after usage to clean up the memory.</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">unsigned LodePNG_decode32f(unsigned char** out, unsigned* w, unsigned* h, const char* filename);</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">Load PNG from disk, from file with given name.</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">Same as decode32, except you give a filename instead of an input buffer.</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">unsigned LodePNG_encode32(unsigned char** out, size_t* outsize, const unsigned char* image, unsigned w, unsigned h);</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">Encode PNG into buffer.</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">As input, give a image buffer of size w * h * 4, in RGBA format.</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">As output, you get a dynamically allocated buffer and its size, which is a PNG file that can</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">directly be saved in this form to the harddisk.</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">The return value is the error (0 if ok).</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">You need to do free(out) after usage to clean up the memory.</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">unsigned LodePNG_encode32f(const char* filename, const unsigned char* image, unsigned w, unsigned h);</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">Encode PNG into file on disk with given name.</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">If the file exists, it&#39;s overwritten without warning!</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">Same parameters as encode2, except the result is stored in a file instead of a dynamic buffer.</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">4.2 C++ Simple Functions</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">------------------------</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">For decoding a PNG there are:</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">unsigned LodePNG::decode(std::vector&lt;unsigned char&gt;&amp; out, unsigned&amp; w, unsigned&amp; h, const unsigned char* in, unsigned size);</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">unsigned LodePNG::decode(std::vector&lt;unsigned char&gt;&amp; out, unsigned&amp; w, unsigned&amp; h, const std::vector&lt;unsigned char&gt;&amp; in);</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">unsigned LodePNG::decode(std::vector&lt;unsigned char&gt;&amp; out, unsigned&amp; w, unsigned&amp; h, const std::string&amp; filename);</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">These store the pixel data as 32-bit RGBA color in the out vector, and the width</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">and height of the image in w and h.</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">The 3 functions each have a different input type: The first as unsigned char</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">buffer, the second as std::vector buffer, and the third allows you to give the</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">filename in case you want to load the PNG from disk instead of from a buffer.</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">The return value is the error (0 if ok).</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">For encoding a PNG there are:</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">unsigned LodePNG::encode(std::vector&lt;unsigned char&gt;&amp; out, const unsigned char* in, unsigned w, unsigned h);</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">unsigned LodePNG::encode(std::vector&lt;unsigned char&gt;&amp; out, const std::vector&lt;unsigned char&gt;&amp; in, unsigned w, unsigned h);</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">unsigned LodePNG::encode(const std::string&amp; filename, const std::vector&lt;unsigned char&gt;&amp; in, unsigned w, unsigned h);</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">unsigned LodePNG::encode(const std::string&amp; filename, const unsigned char* in, unsigned w, unsigned h);</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">Specify the width and height of the input image with w and h.</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">You can choose to get the output in an std::vector or stored in a file, and</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">the input can come from an std::vector or an unsigned char* buffer. The input</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">buffer must be in RGBA format and the size must be w * h * 4 bytes.</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">The first two functions append to the out buffer, they don&#39;t clear it, clear it</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">first before encoding into a buffer that you expect to only contain this result.</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">On the other hand, the functions that encode to a file will completely overwrite</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">the original file without warning if it exists.</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">The return value is the error (0 if ok).</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">5. Decoder</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">----------</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">This is about the LodePNG_Decoder struct in the C version, and the</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">LodePNG::Decoder class in the C++ version. The C++ version inherits</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">from the C struct and adds functions in the interface.</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">The Decoder class can be used to convert a PNG image to a raw image.</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">Usage:</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">-in C++:</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">  declare a LodePNG::Decoder</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">  call its decode member function with the parameters described below</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">-in C more needs to be done due to the lack of constructors and destructors:</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">  declare a LodePNG_Decoder struct</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">  call LodePNG_Decoder_init with the struct as parameter</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">  call LodePNG_Decode with the parameters described below</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">  after usage, call LodePNG_Decoder_cleanup with the struct as parameter</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">  after usage, free() the out buffer with image data that was created by the decode function</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">The other parameters of the decode function are:</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">*) out: this buffer will be filled with the raw image pixels</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">*) in: pointer to the PNG image data or std::vector with the data</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">*) size: the size of the PNG image data (not needed for std::vector version)</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">After decoding you need to read the width and height of the image from the</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">decoder, see further down in this manual to see how.</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">There&#39;s also an optional function &quot;inspect&quot;. It has the same parameters as decode except</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">the &quot;out&quot; parameter. This function will read only the header chunk of the PNG</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">image, and store the information from it in the LodePNG_InfoPng (see below).</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">This allows knowing information about the image without decoding it. Only the</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">header (IHDR) information is read by this, not text chunks, not the palette, ...</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">During the decoding it&#39;s possible that an error can happen, for example if the</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">PNG image was corrupted. To check if an error happened during the last decoding,</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">check the value error, which is a member of the decoder struct.</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">In the C++ version, use hasError() and getError() of the Decoder.</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment">The error codes are explained in another section.</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment">Now about colors and settings...</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">The Decoder contains 3 components:</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">*) LodePNG_InfoPng: it stores information about the PNG (the input) in an LodePNG_InfoPng struct, don&#39;t modify this one yourself</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">*) Settings: you can specify a few other settings for the decoder to use</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">*) LodePNG_InfoRaw: here you can say what type of raw image (the output) you want to get</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">Some of the parameters described below may be inside the sub-struct &quot;LodePNG_InfoColor color&quot;.</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">In the C and C++ version, when using Info structs outside of the decoder or encoder, you need to use their</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">init and cleanup functions, but normally you use the ones in the decoder that are already handled</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">in the init and cleanup functions of the decoder itself.</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">=LodePNG_InfoPng=</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment">This contains information such as the original color type of the PNG image, text</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">comments, suggested background color, etc... More details about the LodePNG_InfoPng struct</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">are in another section.</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">Because the dimensions of the image are important, there are shortcuts to get them in the</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">C++ version: use decoder.getWidth() and decoder.getHeight().</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">In the C version, use decoder.infoPng.width and decoder.infoPng.height.</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">=LodePNG_InfoRaw=</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">In the LodePNG_InfoRaw struct of the Decoder, you can specify which color type you want</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">the resulting raw image to be. If this is different from the colorType of the</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">PNG, then the decoder will automatically convert the result to your LodePNG_InfoRaw</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">settings. Currently the following options are supported to convert to:</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">-colorType 6, bitDepth 8: 32-bit RGBA</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">-colorType 2, bitDepth 8: 24-bit RGB</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">-other color types if it&#39;s exactly the same as that in the PNG image</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">Palette of LodePNG_InfoRaw isn&#39;t used by the Decoder, when converting from palette color</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">to palette color, the values of the pixels are left untouched so that the colors</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">will change if the palette is different. Color key of LodePNG_InfoRaw is not used by the</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">Decoder. If setting color_convert is false then LodePNG_InfoRaw is completely ignored,</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">but it will be modified to match the color type of the PNG so will be overwritten.</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">By default, 32-bit color is used for the result.</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">=Settings=</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">The Settings can be used to ignore the errors created by invalid CRC and Adler32</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">chunks, and to disable the decoding of tEXt chunks.</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment">There&#39;s also a setting color_convert, true by default. If false, no conversion</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">is done, the resulting data will be as it was in the PNG (after decompression)</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">and you&#39;ll have to puzzle the colors of the pixels together yourself using the</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">color type information in the LodePNG_InfoPng.</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">6. Encoder</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">----------</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">This is about the LodePNG_Encoder struct in the C version, and the</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">LodePNG::Encoder class in the C++ version.</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">The Encoder class can be used to convert raw image data into a PNG image.</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">The PNG part of the encoder is working good, the zlib compression part is</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">becoming quite fine but not as good as the official zlib yet, because it&#39;s not</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment">as fast and doesn&#39;t provide an as high compression ratio.</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">Usage:</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">-in C++:</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment">  declare a LodePNG::Encoder</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">  call its encode member function with the parameters described below</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">-in C more needs to be done due to the lack of constructors and destructors:</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">  declare a LodePNG_Encoder struct</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">  call LodePNG_Encoder_init with the struct as parameter</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">  call LodePNG_Encode with the parameters described below</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">  after usage, call LodePNG_Encoder_cleanup with the struct as parameter</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">  after usage, free() the out buffer with PNG data that was created by the encode function</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">The raw image given to the encoder is an unsigned char* buffer. You also have to</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">specify the width and height of the raw image. The result is stored in a given</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">buffer. These buffers can be unsigned char* pointers, std::vectors or dynamically</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">allocated unsigned char* buffers that you have to free() yourself, depending on</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">which you use.</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">The parameters of the encode function are:</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">*) out: in this buffer the PNG file data will be stored (it will be appended)</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">*) in: vector of or pointer to a buffer containing the raw image</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">*) w and h: the width and height of the raw image in pixels</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">Make sure that the in buffer you provide, is big enough to contain w * h pixels</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">of the color type specified by the LodePNG_InfoRaw.</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">In the C version, you need to free() the out buffer after usage to avoid memory leaks.</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">In the C version, you need to use the LodePNG_Encoder_init function before using the decoder,</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">and the LodePNG_Encoder_cleanup function after using it.</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">In the C++ version, you don&#39;t need to do this since RAII takes care of it.</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">The encoder generates some errors but not for everything, because, unlike when</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">decoding a PNG, when encoding one there aren&#39;t so much parameters of the input</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">that can be corrupted. It&#39;s the responsibility of the user to make sure that all</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">preconditions are satesfied, such as giving a correct window size, giving an</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">existing btype, making sure the given buffer is large enough to contain an image</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">with the given width and height and colortype, ... The encoder can generate</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">some errors, see the section with the explanations of errors for those.</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">Like the Decoder, the Encoder has 3 components:</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">*) LodePNG_InfoRaw: here you say what color type of the raw image (the input) has</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">*) Settings: you can specify a few settings for the encoder to use</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">*) LodePNG_InfoPng: the same LodePNG_InfoPng struct as created by the Decoder. For the encoder,</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">with this you specify how you want the PNG (the output) to be.</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">Some of the parameters described below may be inside the sub-struct &quot;LodePNG_InfoColor color&quot;.</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">In the C and C++ version, when using Info structs outside of the decoder or encoder, you need to use their</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">init and cleanup functions, but normally you use the ones in the encoder that are already handled</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment">in the init and cleanup functions of the decoder itself.</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment">=LodePNG_InfoPng=</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">The Decoder class stores information about the PNG image in an LodePNG_InfoPng object. With</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment">the Encoder you can do the opposite: you give it an LodePNG_InfoPng object, and it&#39;ll try</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">to match the LodePNG_InfoPng you give as close as possible in the PNG it encodes. For</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment">example in the LodePNG_InfoPng you can specify the color type you want to use, possible</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment">tEXt chunks you want the PNG to contain, etc... For an explanation of all the</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment">values in LodePNG_InfoPng see a further section. Not all PNG color types are supported</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">by the Encoder.</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment">Note that the encoder will only TRY to match the LodePNG_InfoPng struct you give.</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">Some things are ignored by the encoder. The width and height of LodePNG_InfoPng are</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">ignored as well, because instead the width and height of the raw image you give</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">in the input are used. In fact the encoder currently uses only the following</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">settings from it:</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">-colorType: the ones it supports</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">-text chunks, that you can add to the LodePNG_InfoPng with &quot;addText&quot;</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">-the color key, if applicable for the given color type</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">-the palette, if you encode to a PNG with colorType 3</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">-the background color: it&#39;ll add a bKGD chunk to the PNG if one is given</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">-the interlaceMethod: None (0) or Adam7 (1)</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">When encoding to a PNG with colorType 3, the encoder will generate a PLTE chunk.</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">If the palette contains any colors for which the alpha channel is not 255 (so</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">there are translucent colors in the palette), it&#39;ll add a tRNS chunk.</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">=LodePNG_InfoRaw=</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">You specify the color type of the raw image that you give to the input here,</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">including a possible transparent color key and palette you happen to be using in</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">your raw image data.</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">By default, 32-bit color is assumed, meaning your input has to be in RGBA</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">format with 4 bytes (unsigned chars) per pixel.</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">=Settings=</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment">The following settings are supported (some are in sub-structs):</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment">*) autoLeaveOutAlphaChannel: when this option is enabled, when you specify a PNG</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment">color type with alpha channel (not to be confused with the color type of the raw</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">image you specify!!), but the encoder detects that all pixels of the given image</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">are opaque, then it&#39;ll automatically use the corresponding type without alpha</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment">channel, resulting in a smaller PNG image.</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment">*) btype: the block type for LZ77. 0 = uncompressed, 1 = fixed huffman tree, 2 = dynamic huffman tree (best compression)</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="comment">*) useLZ77: whether or not to use LZ77 for compressed block types</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment">*) windowSize: the window size used by the LZ77 encoder (1 - 32768)</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment">*) force_palette: if colorType is 2 or 6, you can make the encoder write a PLTE</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">   chunk if force_palette is true. This can used as suggested palette to convert</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">   to by viewers that don&#39;t support more than 256 colors (if those still exist)</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">*) add_id: add text chunk &quot;Encoder: LodePNG &lt;version&gt;&quot; to the image.</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment">*) text_compression: default 0. If 1, it&#39;ll store texts as zTXt instead of tEXt chunks.</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment">  zTXt chunks use zlib compression on the text. This gives a smaller result on</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment">  large texts but a larger result on small texts (such as a single program name).</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment">  It&#39;s all tEXt or all zTXt though, there&#39;s no separate setting per text yet.</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">7. color conversions</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">--------------------</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment">For trickier usage of LodePNG, you need to understand about PNG color types and</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment">about how and when LodePNG uses the settings in LodePNG_InfoPng, LodePNG_InfoRaw and Settings.</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">=PNG color types=</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">A PNG image can have many color types, ranging from 1-bit color to 64-bit color,</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment">as well as palettized color modes. After the zlib decompression and unfiltering</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment">in the PNG image is done, the raw pixel data will have that color type and thus</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">a certain amount of bits per pixel. If you want the output raw image after</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">decoding to have another color type, a conversion is done by LodePNG.</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">The PNG specification mentions the following color types:</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment">0: greyscale, bit depths 1, 2, 4, 8, 16</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">2: RGB, bit depths 8 and 16</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment">3: palette, bit depths 1, 2, 4 and 8</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">4: greyscale with alpha, bit depths 8 and 16</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">6: RGBA, bit depths 8 and 16</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">Bit depth is the amount of bits per color channel.</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">=Default Behaviour of LodePNG=</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">By default, the Decoder will convert the data from the PNG to 32-bit RGBA color,</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">no matter what color type the PNG has, so that the result can be used directly</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">as a texture in OpenGL etc... without worries about what color type the original</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment">image has.</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment">The Encoder assumes by default that the raw input you give it is a 32-bit RGBA</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment">buffer and will store the PNG as either 32 bit or 24 bit depending on whether</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment">or not any translucent pixels were detected in it.</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">To get the default behaviour, don&#39;t change the values of LodePNG_InfoRaw and LodePNG_InfoPng of</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">the encoder, and don&#39;t change the values of LodePNG_InfoRaw of the decoder.</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">=Color Conversions=</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">As explained in the sections about the Encoder and Decoder, you can specify</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">color types and bit depths in LodePNG_InfoPng and LodePNG_InfoRaw, to change the default behaviour</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">explained above. (for the Decoder you can only specify the LodePNG_InfoRaw, because the</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">LodePNG_InfoPng contains what the PNG file has).</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">To avoid some confusion:</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment">-the Decoder converts from PNG to raw image</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">-the Encoder converts from raw image to PNG</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">-the color type and bit depth in LodePNG_InfoRaw, are those of the raw image</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">-the color type and bit depth in LodePNG_InfoPng, are those of the PNG</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">-if the color type of the LodePNG_InfoRaw and PNG image aren&#39;t the same, a conversion</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">between the color types is done if the color types are supported</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">Supported color types:</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">-It&#39;s possible to load PNGs from any colortype and to save PNGs of any colorType.</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">-Both encoder and decoder use the same converter. So both encoder and decoder</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">suport the same color types at the input and the output. So the decoder supports</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">any type of PNG image and can convert it to certain types of raw image, while the</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">encoder supports any type of raw data but only certain color types for the output PNG.</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">-The converter can convert from _any_ input color type, to 24-bit RGB or 32-bit RGBA</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">-The converter can convert from greyscale input color type, to 8-bit greyscale or greyscale with alpha</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">-If both color types are the same, conversion from anything to anything is possible</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment">-Color types that are invalid according to the PNG specification are not allowed</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment">-When converting from a type with alpha channel to one without, the alpha channel information is discarded</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment">-When converting from a type without alpha channel to one with, the result will be opaque except pixels that have the same color as the color key of the input if one was given</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment">-When converting from 16-bit bitDepth to 8-bit bitDepth, the 16-bit precision information is lost, only the most significant byte is kept</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment">-Converting from color to greyscale is not supported on purpose: choosing what kind of color to greyscale conversion to do is not a decision a PNG codec should make</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="comment">-Converting from/to a palette type, only keeps the indices, it ignores the colors defined in the palette</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">No conversion needed...:</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">-If the color type of the PNG image and raw image are the same, then no</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">conversion is done, and all color types are supported.</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">-In the encoder, you can make it save a PNG with any color by giving the</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment">LodePNG_InfoRaw and LodePNG_InfoPng the same color type.</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment">-In the decoder, you can make it store the pixel data in the same color type</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">as the PNG has, by setting the color_convert setting to false. Settings in</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">infoRaw are then ignored.</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">The function LodePNG_convert does this, which is available in the interface but</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">normally isn&#39;t needed since the encoder and decoder already call it.</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">=More Notes=</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">In the PNG file format, if a less than 8-bit per pixel color type is used and the scanlines</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">have a bit amount that isn&#39;t a multiple of 8, then padding bits are used so that each</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">scanline starts at a fresh byte.</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">However: The input image you give to the encoder, and the output image you get from the decoder</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">will NOT have these padding bits in that case, e.g. in the case of a 1-bit image with a width</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">of 7 pixels, the first pixel of the second scanline will the the 8th bit of the first byte,</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment">not the first bit of a new byte.</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment">8. info values</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment">--------------</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment">Both the encoder and decoder use a variable of type LodePNG_InfoPng and LodePNG_InfoRaw, which</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment">both also contain a LodePNG_InfoColor. Here&#39;s a list of each of the values stored in them:</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment">*) info from the PNG header (IHDR chunk):</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="comment">width:             width of the image in pixels</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment">height:            height of the image in pixels</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">colorType:         color type of the original PNG file</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">bitDepth:          bits per sample</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">compressionMethod: compression method of the original file. Always 0.</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">filterMethod:      filter method of the original file. Always 0.</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">interlaceMethod:   interlace method of the original file. 0 is no interlace, 1 is adam7 interlace.</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment">Note: width and height are only used as information of a decoded PNG image. When encoding one, you don&#39;t have</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="comment">to specify width and height in an LodePNG_Info struct, but you give them as parameters of the encode function.</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment">The rest of the LodePNG_Info struct IS used by the encoder though!</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">*) palette:</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">This is a dynamically allocated unsigned char array with the colors of the palette. The value palettesize</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">indicates the amount of colors in the palette. The allocated size of the buffer is 4 * palettesize bytes,</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">because there are 4 values per color: R, G, B and A. Even if less color channels are used, the palette</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment">is always in RGBA format, in the order RGBARGBARGBA.....</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">When encoding a PNG, to store your colors in the palette of the LodePNG_InfoRaw, first use</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">LodePNG_InfoColor_clearPalette, then for each color use LodePNG_InfoColor_addPalette.</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">In the C++ version the Encoder class also has the above functions available directly in its interface.</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">Note that the palette information from the tRNS chunk is also already included in this palette vector.</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">If you encode an image with palette, don&#39;t forget that you have to set the alpha channels (A) of the palette</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">too, set them to 255 for an opaque palette. If you leave them at zero, the image will be encoded as</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="comment">fully invisible. This both for the palette in the infoRaw and the infoPng if the png is to have a palette.</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">*) transparent color key</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="comment">key_defined: is a transparent color key given?</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment">key_r:       red/greyscale component of color key</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment">key_g:       green component of color key</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment">key_b:       blue component of color key</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment">For greyscale PNGs, r, g and b will all 3 be set to the same.</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">This color is 8-bit for 8-bit PNGs, 16-bit for 16-bit per channel PNGs.</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">*) suggested background color</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment">background_defined: is a suggested background color given?</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">background_r:       red component of sugg. background color</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">background_g:       green component of sugg. background color</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment">background_b:       blue component of sugg. background color</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">This color is 8-bit for 8-bit PNGs, 16-bit for 16-bit PNGs</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="comment">For greyscale PNGs, r, g and b will all 3 be set to the same. When encoding</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment">the encoder writes the red one away.</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="comment">For palette PNGs: When decoding, the RGB value will be stored, no a palette</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment">index. But when encoding, specify the index of the palette in background_r,</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">the other two are then ignored.</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">The decoder pretty much ignores this background color, after all if you make a</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment">PNG translucent normally you intend it to be used against any background, on</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment">websites, as translucent textures in games, ... But you can get the color this</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="comment">way if needed.</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="comment">*) text and itext</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment">Non-international text:</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment">-text.keys:    a char** buffer containing the keywords (see below)</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment">-text.strings: a char** buffer containing the texts (see below)</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">-text.num: the amount of texts in the above char** buffers (there may be more texts in itext)</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment">-LodePNG_InfoText_clearText: use this to clear the texts again after you filled them in</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment">-LodePNG_InfoText_addText: this function is used to push back a keyword and text</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">International text: This is stored in separate arrays! The sum text.num and itext.num is the real amount of texts.</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">-itext.keys: keyword in English</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment">-itext.langtags: ISO 639 letter code for the language</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment">-itext.transkeys: keyword in this language</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment">-itext.strings: the text in this language, in UTF-8</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment">-itext.num: the amount of international texts in this PNG</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment">-LodePNG_InfoIText_clearText: use this to clear the itexts again after you filled them in</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment">-LodePNG_InfoIText_addText: this function is used to push back all 4 parts of an itext</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment">Don&#39;t allocate these text buffers yourself. Use the init/cleanup functions</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment">correctly and use addText and clearText.</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">In the C++ version the Encoder class also has the above functions available directly in its interface.</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment">The char** buffers are used like the argv parameter of a main() function, and (i)text.num takes the role</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">of argc.</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">In a text, there must be as much keys as strings because they always form pairs. In an itext,</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">there must always be as much keys, langtags, transkeys and strings.</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment">They keyword of text chunks gives a short description what the actual text</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">represents. There are a few standard standard keywords recognised</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">by many programs: Title, Author, Description, Copyright, Creation Time,</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">Software, Disclaimer, Warning, Source, Comment. It&#39;s allowed to use other keys.</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment">The keyword is minimum 1 character and maximum 79 characters long. It&#39;s</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">discouraged to use a single line length longer than 79 characters for texts.</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="comment">*) additional color info</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="comment">These functions are available with longer names in the C version, and directly</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="comment">in the Decoder&#39;s interface in the C++ version.</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">getBpp():          bits per pixel of the PNG image</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">getChannels():     amount of color channels of the PNG image</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment">isGreyscaleType(): its color type 0 or 4</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment">isAlphaType():     its color type 2 or 6</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment">These values are calculated out of color type and bit depth of InfoColor.</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">The difference between bits per pixel and bit depth is that bit depth is the</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment">number of bits per color channel, while a pixel can have multiple channels.</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">*) pHYs chunk (image dimensions)</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment">phys_defined: if 0, there is no pHYs chunk and the values are undefined, if 1 else there is one</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment">phys_x: pixels per unit in x direction</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">phys_y: pixels per unit in y direction</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">phys_unit: the unit, 0 is no unit (x and y only give the ratio), 1 is metre</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">*) tIME chunk (modification time)</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment">time_defined: if 0, there is no tIME chunk and the values are undefined, if 1 there is one</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment">time: this struct contains year as a 2-byte number (0-65535), month, day, hour, minute,</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment">second as 1-byte numbers that must be in the correct range</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment">Note: to make the encoder add a time chunk, set time_defined to 1 and fill in</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment">the correct values in all the time parameters, LodePNG will not fill the current</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment">time in these values itself, all it does is copy them over into the chunk bytes.</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">9. error values</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">---------------</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">The meanings of the LodePNG error values:</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment">*) 0: no error, everything went ok</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment">*) 1: the Encoder/Decoder has done nothing yet, so error checking makes no sense yet</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment">*) 10: while huffman decoding: end of input memory reached without endcode</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment">*) 11: while huffman decoding: error in code tree made it jump outside of tree</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment">*) 13: problem while processing dynamic deflate block</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment">*) 14: problem while processing dynamic deflate block</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment">*) 15: problem while processing dynamic deflate block</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">*) 16: unexisting code while processing dynamic deflate block</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment">*) 17: while inflating: end of out buffer memory reached</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment">*) 18: while inflating: invalid distance code</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment">*) 19: while inflating: end of out buffer memory reached</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment">*) 20: invalid deflate block BTYPE encountered while decoding</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment">*) 21: NLEN is not ones complement of LEN in a deflate block</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="comment">*) 22: while inflating: end of out buffer memory reached.</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment">   This can happen if the inflated deflate data is longer than the amount of bytes required to fill up</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment">   all the pixels of the image, given the color depth and image dimensions. Something that doesn&#39;t</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment">   happen in a normal, well encoded, PNG image.</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment">*) 23: while inflating: end of in buffer memory reached</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="comment">*) 24: invalid FCHECK in zlib header</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="comment">*) 25: invalid compression method in zlib header</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment">*) 26: FDICT encountered in zlib header while it&#39;s not used for PNG</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment">*) 27: PNG file is smaller than a PNG header</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment">*) 28: incorrect PNG signature (the first 8 bytes of the PNG file)</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment">   Maybe it&#39;s not a PNG, or a PNG file that got corrupted so that the header indicates the corruption.</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment">*) 29: first chunk is not the header chunk</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">*) 30: chunk length too large, chunk broken off at end of file</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">*) 31: illegal PNG color type or bpp</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment">*) 32: illegal PNG compression method</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment">*) 33: illegal PNG filter method</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="comment">*) 34: illegal PNG interlace method</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="comment">*) 35: chunk length of a chunk is too large or the chunk too small</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="comment">*) 36: illegal PNG filter type encountered</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment">*) 37: illegal bit depth for this color type given</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment">*) 38: the palette is too big (more than 256 colors)</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">*) 39: more palette alpha values given in tRNS, than there are colors in the palette</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">*) 40: tRNS chunk has wrong size for greyscale image</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment">*) 41: tRNS chunk has wrong size for RGB image</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">*) 42: tRNS chunk appeared while it was not allowed for this color type</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">*) 43: bKGD chunk has wrong size for palette image</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">*) 44: bKGD chunk has wrong size for greyscale image</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">*) 45: bKGD chunk has wrong size for RGB image</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">*) 46: value encountered in indexed image is larger than the palette size (bitdepth == 8). Is the palette too small?</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment">*) 47: value encountered in indexed image is larger than the palette size (bitdepth &lt; 8). Is the palette too small?</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment">*) 48: the input data is empty. Maybe a PNG file you tried to load doesn&#39;t exist or is in the wrong path.</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">*) 49: jumped past memory while generating dynamic huffman tree</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">*) 50: jumped past memory while generating dynamic huffman tree</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">*) 51: jumped past memory while inflating huffman block</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">*) 52: jumped past memory while inflating</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment">*) 53: size of zlib data too small</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">*) 55: jumped past tree while generating huffman tree, this could be when the</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">       tree will have more leaves than symbols after generating it out of the</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">       given lengths. They call this an oversubscribed dynamic bit lengths tree in zlib.</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment">*) 56: given output image colorType or bitDepth not supported for color conversion</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">*) 57: invalid CRC encountered (checking CRC can be disabled)</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment">*) 58: invalid ADLER32 encountered (checking ADLER32 can be disabled)</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">*) 59: conversion to unexisting or unsupported color type or bit depth requested by encoder or decoder</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">*) 60: invalid window size given in the settings of the encoder (must be 0-32768)</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment">*) 61: invalid BTYPE given in the settings of the encoder (only 0, 1 and 2 are allowed)</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment">*) 62: conversion from non-greyscale color to greyscale color requested by encoder or decoder. LodePNG</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment">       leaves the choice of RGB to greyscale conversion formula to the user.</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">*) 63: length of a chunk too long, max allowed for PNG is 2147483647 bytes per chunk (2^31-1)</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">*) 64: the length of the &quot;end&quot; symbol 256 in the Huffman tree is 0, resulting in the inability of a deflated</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment">       block to ever contain an end code. It must be at least 1.</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment">*) 66: the length of a text chunk keyword given to the encoder is longer than the maximum 79 bytes.</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">*) 67: the length of a text chunk keyword given to the encoder is smaller than the minimum 1 byte.</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment">*) 68: tried to encode a PLTE chunk with a palette that has less than 1 or more than 256 colors</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment">*) 69: unknown chunk type with &quot;critical&quot; flag encountered by the decoder</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment">*) 71: unexisting interlace mode given to encoder (must be 0 or 1)</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="comment">*) 72: while decoding, unexisting compression method encountering in zTXt or iTXt chunk (it must be 0)</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="comment">*) 73: invalid tIME chunk size</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment">*) 74: invalid pHYs chunk size</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment">*) 75: no null termination char found while decoding any kind of text chunk, or wrong length</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment">*) 76: iTXt chunk too short to contain required bytes</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="comment">*) 77: integer overflow in buffer size happened somewhere</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">*) 78: file doesn&#39;t exist or couldn&#39;t be opened for reading</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment">*) 79: file couldn&#39;t be opened for writing</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment">*) 80: tried creating a tree for 0 symbols</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment">*) 9900-9999: out of memory while allocating chunk of memory somewhere</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment">10. file IO</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment">-----------</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="comment">For cases where you want to load the PNG image from a file, you can use your own</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="comment">file loading code, or the file loading and saving functions provided with</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment">LodePNG. These use the same unsigned char format used by the Decoder and Encoder.</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment">The loadFile function fills the given buffer up with the file from harddisk</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment">with the given name.</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment">The saveFile function saves the contents of the given buffer to the file</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment">with given name. Warning: this overwrites the contents that were previously in</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment">the file if it already existed, without warning.</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment">Note that you don&#39;t have to decode a PNG image from a file, you can as well</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment">retrieve the buffer another way in your code, because the decode function takes</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment">a buffer as parameter, not a filename.</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment">Both C and C++ versions of the loadFile and saveFile functions are available.</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment">For the C version of loadFile, you need to free() the buffer after use. The</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment">C++ versions use std::vectors so they clean themselves automatically.</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment">11. chunks and PNG editing</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment">--------------------------</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment">If you want to add extra chunks to a PNG you encode, or use LodePNG for a PNG</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="comment">editor that should follow the rules about handling of unknown chunks, or if you</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment">program is able to read other types of chunks than the ones handled by LodePNG,</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment">then that&#39;s possible with the chunk functions of LodePNG.</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment">A PNG chunk has the following layout:</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment">4 bytes length</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="comment">4 bytes type name</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="comment">length bytes data</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment">4 bytes CRC</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment">11.1 iterating through chunks</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="comment">-----------------------------</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment">If you have a buffer containing the PNG image data, then the first chunk (the</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment">IHDR chunk) starts at byte number 8 of that buffer. The first 8 bytes are the</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">signature of the PNG and are not part of a chunk. But if you start at byte 8</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment">then you have a chunk, and can check the following things of it.</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment">NOTE: none of these functions check for memory buffer boundaries. To avoid</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment">exploits, always make sure the buffer contains all the data of the chunks.</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment">When using LodePNG_chunk_next, make sure the returned value is within the</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment">allocated memory.</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment">unsigned LodePNG_chunk_length(const unsigned char* chunk):</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment">Get the length of the chunk&#39;s data. The total chunk length is this length + 12.</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment">void LodePNG_chunk_type(char type[5], const unsigned char* chunk):</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment">unsigned char LodePNG_chunk_type_equals(const unsigned char* chunk, const char* type):</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment">Get the type of the chunk or compare if it&#39;s a certain type</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment">unsigned char LodePNG_chunk_critical(const unsigned char* chunk):</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">unsigned char LodePNG_chunk_private(const unsigned char* chunk):</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment">unsigned char LodePNG_chunk_safetocopy(const unsigned char* chunk):</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="comment">Check if the chunk is critical in the PNG standard (only IHDR, PLTE, IDAT and IEND are).</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment">Check if the chunk is private (public chunks are part of the standard, private ones not).</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment">Check if the chunk is safe to copy. If it&#39;s not, then, when modifying data in a critical</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="comment">chunk, unsafe to copy chunks of the old image may NOT be saved in the new one if your</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment">program doesn&#39;t handle that type of unknown chunk.</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="comment">unsigned char* LodePNG_chunk_data(unsigned char* chunk):</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment">const unsigned char* LodePNG_chunk_data_const(const unsigned char* chunk):</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="comment">Get a pointer to the start of the data of the chunk.</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment">unsigned LodePNG_chunk_check_crc(const unsigned char* chunk):</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment">void LodePNG_chunk_generate_crc(unsigned char* chunk):</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="comment">Check if the crc is correct or generate a correct one.</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="comment">unsigned char* LodePNG_chunk_next(unsigned char* chunk):</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="comment">const unsigned char* LodePNG_chunk_next_const(const unsigned char* chunk):</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment">Iterate to the next chunk. This works if you have a buffer with consecutive chunks. Note that these</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="comment">functions do no boundary checking of the allocated data whatsoever, so make sure there is enough</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment">data available in the buffer to be able to go to the next chunk.</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="comment">unsigned LodePNG_append_chunk(unsigned char** out, size_t* outlength, const unsigned char* chunk):</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="comment">unsigned LodePNG_create_chunk(unsigned char** out, size_t* outlength, unsigned length, const char* type, const unsigned char* data):</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="comment">These functions are used to create new chunks that are appended to the data in *out that has</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment">length *outlength. The append function appends an existing chunk to the new data. The create</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">function creates a new chunk with the given parameters and appends it. Type is the 4-letter</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">name of the chunk.</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">11.2 chunks in infoPng</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment">----------------------</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">The LodePNG_InfoPng struct contains a struct LodePNG_UnknownChunks in it. This</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">struct has 3 buffers (each with size) to contain 3 types of unknown chunks:</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment">the ones that come before the PLTE chunk, the ones that come between the PLTE</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="comment">and the IDAT chunks, and the ones that come after the IDAT chunks.</span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment">It&#39;s necessary to make the distionction between these 3 cases because the PNG</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment">standard forces to keep the ordering of unknown chunks compared to the critical</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="comment">chunks, but does not force any other ordering rules.</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;<span class="comment">infoPng.unknown_chunks.data[0] is the chunks before PLTE</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;<span class="comment">infoPng.unknown_chunks.data[1] is the chunks after PLTE, before IDAT</span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;<span class="comment">infoPng.unknown_chunks.data[2] is the chunks after IDAT</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="comment">The chunks in these 3 buffers can be iterated through and read by using the same</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment">way described in the previous subchapter.</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="comment">When using the decoder to decode a PNG, you can make it store all unknown chunks</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="comment">if you set the option settings.rememberUnknownChunks to 1. By default, this option</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment">is off and is 0.</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment">The encoder will always encode unknown chunks that are stored in the infoPng. If</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment">you need it to add a particular chunk that isn&#39;t known by LodePNG, you can use</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment">LodePNG_append_chunk or LodePNG_create_chunk to the chunk data in</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment">infoPng.unknown_chunks.data[x].</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="comment">Chunks that are known by LodePNG should not be added in that way. E.g. to make</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;<span class="comment">LodePNG add a bKGD chunk, set background_defined to true and add the correct</span></div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;<span class="comment">parameters there and LodePNG will generate the chunk.</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="comment">12. compiler support</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="comment">--------------------</span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="comment">No libraries other than the current standard C library are needed to compile</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="comment">LodePNG. For the C++ version, only the standard C++ library is needed on top.</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;<span class="comment">Add the files lodepng.c(pp) and lodepng.h to your project, include</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="comment">lodepng.h where needed, and your program can read/write PNG files.</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="comment">Use optimization! For both the encoder and decoder, compiling with the best</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="comment">optimizations makes a large difference.</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="comment">Make sure that LodePNG is compiled with the same compiler of the same version</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="comment">and with the same settings as the rest of the program, or the interfaces with</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="comment">std::vectors and std::strings in C++ can be incompatible resulting in bad things.</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment">CHAR_BITS must be 8 or higher, because LodePNG uses unsigned chars for octets.</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="comment">*) gcc and g++</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="comment">LodePNG is developed in gcc so this compiler is natively supported. It gives no</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="comment">warnings with compiler options &quot;-Wall -Wextra -pedantic -ansi&quot;, with gcc and g++</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment">version 4.2.2 on Linux.</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment">*) Mingw and Bloodshed DevC++</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="comment">The Mingw compiler (a port of gcc) used by Bloodshed DevC++ for Windows is fully</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="comment">supported by LodePNG.</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment">*) Visual Studio 2005 and Visual C++ 2005 Express Edition</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="comment">Versions 20070604 up to 20080107 have been tested on VS2005 and work. There are no</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="comment">warnings, except two warnings about &#39;fopen&#39; being deprecated. &#39;fopen&#39; is a function</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="comment">required by the C standard, so this warning is the fault of VS2005, it&#39;s nice of</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="comment">them to enforce secure code, however the multiplatform LodePNG can&#39;t follow their</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="comment">non-standard extensions. LodePNG is fully ISO C90 compliant.</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment">If you&#39;re using LodePNG in VS2005 and don&#39;t want to see the deprecated warnings,</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment">put this on top of lodepng.h before the inclusions: #define _CRT_SECURE_NO_DEPRECATE</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="comment">*) Visual Studio 6.0</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="comment">The C++ version of LodePNG was not supported by Visual Studio 6.0 because Visual</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="comment">Studio 6.0 doesn&#39;t follow the C++ standard and implements it incorrectly.</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="comment">The current C version of LodePNG has not been tested in VS6 but may work now.</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment">*) Comeau C/C++</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment">Vesion 20070107 compiles without problems on the Comeau C/C++ Online Test Drive</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="comment">at http://www.comeaucomputing.com/tryitout in both C90 and C++ mode.</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="comment">*) Compilers on Macintosh</span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment">I&#39;d love to support Macintosh but don&#39;t have one available to test it on.</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment">If it doesn&#39;t work with your compiler, maybe it can be gotten to work with the</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment">gcc compiler for Macintosh. Someone reported that it doesn&#39;t work well at all</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="comment">for Macintosh. All information on attempts to get it to work on Mac is welcome.</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="comment">*) Other Compilers</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="comment">If you encounter problems on other compilers, I&#39;m happy to help out make LodePNG</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="comment">support the compiler if it supports the ISO C90 and C++ standard well enough. If</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment">the required modification to support the compiler requires using non standard or</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment">lesser C/C++ code or headers, I won&#39;t support it.</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="comment">13. examples</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment">------------</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="comment">This decoder and encoder example show the most basic usage of LodePNG (using the</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="comment">classes, not the simple functions, which would be trivial)</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">More complex examples can be found in:</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">-lodepng_examples.c: 9 different examples in C, such as showing the image with SDL, ...</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment">-lodepng_examples.cpp: the exact same examples in C++ using the C++ wrapper of LodePNG</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="comment">13.1. decoder C++ example</span></div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="comment">-------------------------</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment">#include &quot;lodepng.h&quot;</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">#include &lt;iostream&gt;</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="comment">int main(int argc, char *argv[])</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="comment">{</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="comment">  const char* filename = argc &gt; 1 ? argv[1] : &quot;test.png&quot;;</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">  </span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment">  //load and decode</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">  std::vector&lt;unsigned char&gt; buffer, image;</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">  LodePNG::loadFile(buffer, filename); //load the image file with given filename</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment">  LodePNG::Decoder decoder;</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">  decoder.decode(image, buffer.size() ? &amp;buffer[0] : 0, (unsigned)buffer.size()); //decode the png</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="comment">  </span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment">  //if there&#39;s an error, display it</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment">  if(decoder.hasError()) std::cout &lt;&lt; &quot;error: &quot; &lt;&lt; decoder.getError() &lt;&lt; std::endl;</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="comment">  </span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment">  //the pixels are now in the vector &quot;image&quot;, use it as texture, draw it, ...</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="comment">//alternative version using the &quot;simple&quot; function</span></div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="comment">int main(int argc, char *argv[])</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment">{</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment">  const char* filename = argc &gt; 1 ? argv[1] : &quot;test.png&quot;;</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment">  </span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment">  //load and decode</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment">  std::vector&lt;unsigned char&gt; image;</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment">  unsigned w, h;</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment">  unsigned error = LodePNG::decode(image, w, h, filename);</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment">  </span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="comment">  //if there&#39;s an error, display it</span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="comment">  if(error != 0) std::cout &lt;&lt; &quot;error: &quot; &lt;&lt; error &lt;&lt; std::endl;</span></div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="comment">  </span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment">  //the pixels are now in the vector &quot;image&quot;, use it as texture, draw it, ...</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment">13.2 encoder C++ example</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment">------------------------</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="comment">#include &quot;lodepng.h&quot;</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="comment">#include &lt;iostream&gt;</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="comment">int main(int argc, char *argv[])</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment">{</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment">  //check if user gave a filename</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment">  if(argc &lt;= 1)</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment">  {</span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment">    std::cout &lt;&lt; &quot;please provide a filename to save to\n&quot;;</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="comment">    return 0;</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="comment">  </span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment">  //generate some image</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<span class="comment">  std::vector&lt;unsigned char&gt; image;</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment">  image.resize(512 * 512 * 4);</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment">  for(unsigned y = 0; y &lt; 512; y++)</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="comment">  for(unsigned x = 0; x &lt; 512; x++)</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="comment">  {</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="comment">    image[4 * 512 * y + 4 * x + 0] = 255 * !(x &amp; y);</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="comment">    image[4 * 512 * y + 4 * x + 1] = x ^ y;</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="comment">    image[4 * 512 * y + 4 * x + 2] = x | y;</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment">    image[4 * 512 * y + 4 * x + 3] = 255;</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="comment">  </span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="comment">  //encode and save</span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="comment">  std::vector&lt;unsigned char&gt; buffer;</span></div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="comment">  LodePNG::Encoder encoder;</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="comment">  encoder.encode(buffer, image, 512, 512);</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="comment">  LodePNG::saveFile(buffer, argv[1]);</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment">  </span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="comment">  //the same as the 4 lines of code above, but in 1 call:</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="comment">  //LodePNG::encode(argv[1], image, 512, 512);</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="comment">13.3 Decoder C example</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="comment">----------------------</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="comment">This example loads the PNG in 1 function call</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;<span class="comment">#include &quot;lodepng.h&quot;</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="comment">int main(int argc, char *argv[])</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="comment">{</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="comment">  unsigned error;</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="comment">  unsigned char* image;</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="comment">  size_t w, h;</span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="comment">  </span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<span class="comment">  if(argc &lt;= 1) return 0;</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="comment">  </span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="comment">  error = LodePNG_decode3(&amp;image, &amp;w, &amp;h, filename);</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="comment">  </span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="comment">  free(image);</span></div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment">14. LodeZlib</span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment">------------</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="comment">Also available in the interface is LodeZlib. Both C and C++ versions of these</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">functions are available. The interface is similar to that of the &quot;simple&quot; PNG</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment">encoding and decoding functions.</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="comment">LodeZlib can be used to zlib compress and decompress a buffer. It cannot be</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="comment">used to create gzip files however. Also, it only supports the part of zlib</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="comment">that is required for PNG, it does not support compression and decompression</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="comment">with dictionaries.</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="comment">15. changes</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="comment">-----------</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;<span class="comment">The version number of LodePNG is the date of the change given in the format</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="comment">yyyymmdd.</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="comment">Some changes aren&#39;t backwards compatible. Those are indicated with a (!)</span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment">symbol.</span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="comment">*) 02 sep 2008: fixed bug where it could create empty tree that linux apps could</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;<span class="comment">    read by ignoring the problem but windows apps couldn&#39;t.</span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;<span class="comment">*) 06 jun 2008: added more error checks for out of memory cases.</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="comment">*) 26 apr 2008: added a few more checks here and there to ensure more safety.</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="comment">*) 06 mar 2008: crash with encoding of strings fixed</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;<span class="comment">*) 02 feb 2008: support for international text chunks added (iTXt)</span></div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;<span class="comment">*) 23 jan 2008: small cleanups, and #defines to divide code in sections</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;<span class="comment">*) 20 jan 2008: support for unknown chunks allowing using LodePNG for an editor.</span></div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;<span class="comment">*) 18 jan 2008: support for tIME and pHYs chunks added to encoder and decoder.</span></div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;<span class="comment">*) 17 jan 2008: ability to encode and decode compressed zTXt chunks added</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;<span class="comment">    Also vareous fixes, such as in the deflate and the padding bits code.</span></div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;<span class="comment">*) 13 jan 2008: Added ability to encode Adam7-interlaced images. Improved</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;<span class="comment">    filtering code of encoder.</span></div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;<span class="comment">*) 07 jan 2008: (!) changed LodePNG to use ISO C90 instead of C++. A</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;<span class="comment">    C++ wrapper around this provides an interface almost identical to before.</span></div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;<span class="comment">    Having LodePNG be pure ISO C90 makes it more portable. The C and C++ code</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;<span class="comment">    are together in these files but it works both for C and C++ compilers.</span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="comment">*) 29 dec 2007: (!) changed most integer types to unsigned int + other tweaks</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="comment">*) 30 aug 2007: bug fixed which makes this Borland C++ compatible</span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="comment">*) 09 aug 2007: some VS2005 warnings removed again</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<span class="comment">*) 21 jul 2007: deflate code placed in new namespace separate from zlib code</span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;<span class="comment">*) 08 jun 2007: fixed bug with 2- and 4-bit color, and small interlaced images</span></div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;<span class="comment">*) 04 jun 2007: improved support for Visual Studio 2005: crash with accessing</span></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;<span class="comment">    invalid std::vector element [0] fixed, and level 3 and 4 warnings removed</span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;<span class="comment">*) 02 jun 2007: made the encoder add a tag with version by default</span></div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;<span class="comment">*) 27 may 2007: zlib and png code separated (but still in the same file),</span></div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;<span class="comment">    simple encoder/decoder functions added for more simple usage cases</span></div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;<span class="comment">*) 19 may 2007: minor fixes, some code cleaning, new error added (error 69),</span></div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;<span class="comment">    moved some examples from here to lodepng_examples.cpp</span></div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;<span class="comment">*) 12 may 2007: palette decoding bug fixed</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;<span class="comment">*) 24 apr 2007: changed the license from BSD to the zlib license</span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="comment">*) 11 mar 2007: very simple addition: ability to encode bKGD chunks.</span></div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;<span class="comment">*) 04 mar 2007: (!) tEXt chunk related fixes, and support for encoding</span></div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;<span class="comment">    palettized PNG images. Plus little interface change with palette and texts.</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="comment">*) 03 mar 2007: Made it encode dynamic Huffman shorter  with repeat codes.</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;<span class="comment">    Fixed a bug where the end code of a block had length 0 in the Huffman tree.</span></div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;<span class="comment">*) 26 feb 2007: Huffman compression with dynamic trees (BTYPE 2) now implemented</span></div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;<span class="comment">    and supported by the encoder, resulting in smaller PNGs at the output.</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<span class="comment">*) 27 jan 2007: Made the Adler-32 test faster so that a timewaste is gone.</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="comment">*) 24 jan 2007: gave encoder an error interface. Added color conversion from any</span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="comment">    greyscale type to 8-bit greyscale with or without alpha.</span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="comment">*) 21 jan 2007: (!) Totally changed the interface. It allows more color types</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<span class="comment">    to convert to and is more uniform. See the manual for how it works now.</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;<span class="comment">*) 07 jan 2007: Some cleanup &amp; fixes, and a few changes over the last days:</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="comment">    encode/decode custom tEXt chunks, separate classes for zlib &amp; deflate, and</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;<span class="comment">    at last made the decoder give errors for incorrect Adler32 or Crc.</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;<span class="comment">*) 01 jan 2007: Fixed bug with encoding PNGs with less than 8 bits per channel.</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;<span class="comment">*) 29 dec 2006: Added support for encoding images without alpha channel, and</span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;<span class="comment">    cleaned out code as well as making certain parts faster.</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;<span class="comment">*) 28 dec 2006: Added &quot;Settings&quot; to the encoder.</span></div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;<span class="comment">*) 26 dec 2006: The encoder now does LZ77 encoding and produces much smaller files now.</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;<span class="comment">    Removed some code duplication in the decoder. Fixed little bug in an example.</span></div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;<span class="comment">*) 09 dec 2006: (!) Placed output parameters of public functions as first parameter.</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<span class="comment">    Fixed a bug of the decoder with 16-bit per color.</span></div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;<span class="comment">*) 15 okt 2006: Changed documentation structure</span></div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;<span class="comment">*) 09 okt 2006: Encoder class added. It encodes a valid PNG image from the</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;<span class="comment">    given image buffer, however for now it&#39;s not compressed.</span></div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;<span class="comment">*) 08 sep 2006: (!) Changed to interface with a Decoder class</span></div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;<span class="comment">*) 30 jul 2006: (!) LodePNG_InfoPng , width and height are now retrieved in different</span></div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;<span class="comment">    way. Renamed decodePNG to decodePNGGeneric.</span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;<span class="comment">*) 29 jul 2006: (!) Changed the interface: image info is now returned as a</span></div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;<span class="comment">    struct of type LodePNG::LodePNG_Info, instead of a vector, which was a bit clumsy.</span></div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;<span class="comment">*) 28 jul 2006: Cleaned the code and added new error checks.</span></div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;<span class="comment">    Corrected terminology &quot;deflate&quot; into &quot;inflate&quot;.</span></div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;<span class="comment">*) 23 jun 2006: Added SDL example in the documentation in the header, this</span></div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;<span class="comment">    example allows easy debugging by displaying the PNG and its transparency.</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<span class="comment">*) 22 jun 2006: (!) Changed way to obtain error value. Added</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="comment">    loadFile function for convenience. Made decodePNG32 faster.</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;<span class="comment">*) 21 jun 2006: (!) Changed type of info vector to unsigned.</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="comment">    Changed position of palette in info vector. Fixed an important bug that</span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;<span class="comment">    happened on PNGs with an uncompressed block.</span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;<span class="comment">*) 16 jun 2006: Internally changed unsigned into unsigned where</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;<span class="comment">    needed, and performed some optimizations.</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="comment">*) 07 jun 2006: (!) Renamed functions to decodePNG and placed them</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;<span class="comment">    in LodePNG namespace. Changed the order of the parameters. Rewrote the</span></div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<span class="comment">    documentation in the header. Renamed files to lodepng.cpp and lodepng.h</span></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;<span class="comment">*) 22 apr 2006: Optimized and improved some code</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;<span class="comment">*) 07 sep 2005: (!) Changed to std::vector interface</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="comment">*) 12 aug 2005: Initial release</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;<span class="comment">16. contact information</span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;<span class="comment">-----------------------</span></div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;<span class="comment">Feel free to contact me with suggestions, problems, comments, ... concerning</span></div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;<span class="comment">LodePNG. If you encounter a PNG image that doesn&#39;t work properly with this</span></div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;<span class="comment">decoder, feel free to send it and I&#39;ll use it to find and fix the problem.</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="comment">My email address is (puzzle the account and domain together with an @ symbol):</span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="comment">Domain: gmail dot com.</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="comment">Account: lode dot vandevenne.</span></div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="comment">Copyright (c) 2005-2008 Lode Vandevenne</span></div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="comment">*/</span></div><div class="ttc" id="structLodePNG__InfoPng_html"><div class="ttname"><a href="structLodePNG__InfoPng.html">LodePNG_InfoPng</a></div><div class="ttdef"><b>Definition:</b> lodepng.h:217</div></div>
<div class="ttc" id="structLodePNG__InfoColor_html"><div class="ttname"><a href="structLodePNG__InfoColor.html">LodePNG_InfoColor</a></div><div class="ttdef"><b>Definition:</b> lodepng.h:124</div></div>
<div class="ttc" id="structLodePNG__InfoRaw_html"><div class="ttname"><a href="structLodePNG__InfoRaw.html">LodePNG_InfoRaw</a></div><div class="ttdef"><b>Definition:</b> lodepng.h:264</div></div>
<div class="ttc" id="structLodePNG__Encoder_html"><div class="ttname"><a href="structLodePNG__Encoder.html">LodePNG_Encoder</a></div><div class="ttdef"><b>Definition:</b> lodepng.h:338</div></div>
<div class="ttc" id="structLodePNG__EncodeSettings_html"><div class="ttname"><a href="structLodePNG__EncodeSettings.html">LodePNG_EncodeSettings</a></div><div class="ttdef"><b>Definition:</b> lodepng.h:324</div></div>
<div class="ttc" id="structLodeZlib__DeflateSettings_html"><div class="ttname"><a href="structLodeZlib__DeflateSettings.html">LodeZlib_DeflateSettings</a></div><div class="ttdef"><b>Definition:</b> lodepng.h:62</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 6 2016 18:25:25 for CS 3520 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
